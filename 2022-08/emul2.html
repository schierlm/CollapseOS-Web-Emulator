<!DOCTYPE html>
<head>
<meta charset="utf-8">
<title>Emulator 2 (Advanced system) &ndash; Collapse OS Web Emulators</title>
<script type="text/javascript" src="utils.js"></script>
<script type="text/javascript" src="emul.js"></script>
<script type="text/javascript" src="z80vm.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/DrGoldfire/Z80.js@2304ae274d49bc43e26067a2c0dd329c57305425/Z80.js"></script>
<style type="text/css">
body { font-family: Verdana, Arial, Helvetica, sans-serif; }
.cursor {color: red;}
input#buffer { width: 85%;}
input#buffer, input#hexbuffer { float: left; width: 85%;}
label.lbuf {float:left; width: 10%;}
.clear {clear:left;}
#terminal { clear: both; display: block; border: 1px solid #0000FF; margin 1em; padding: 1px; background-color: #666; color: #00FF00; height: 400px; overflow-y: scroll;}
</style>
</head>
<body>
<h1>Emulator 2 (Advanced system) &ndash; <a href="index.html">Collapse OS Web Emulators</a></h1>
<h2>CPU/ROM</h2>
<p><span id="romstatus">No ROM loaded.</span>
<input type="file" id="romfile" data-autoload="emul1.png" style="display: none;" accept=".png,.rom">
<input type="button" id="loadrom" value="Load ROM (and Reset CPU)">
<input type="button" id="resetcpu" value="Reset CPU">
</p>
<p><span id="cycles">0</span> clock cycles (T-cycles) elapsed.
<input type="button" id="resetcycles" value="Reset counter">
<label><input type="checkbox" id="nobgrun" disabled> Run CPU only after user interaction</label></p>
<h2>First SD Card</h2>
<p>
<a id="localsaveanchor" style="display: none;"></a>
<input type="file" id="cfsfile" data-autoload="sdcard.png" style="display: none;" accept=".png,.bfs">
<input type="button" id="loadcfsauto" value="Load from autosave" disabled>
<input type="button" id="loadcfs" value="Load from file">
<input type="button" id="savecfs" value="Save to file">
<label><input type="checkbox" id="autosavecfs"> Autosave (local storage in browser)</label>
</p>
<h2>Second SD Card</h2>
<p>Use the <tt>SELDISK</tt> command to choose first (0) or second (1) SD card</p>
<p>
<input type="file" id="cfsfile2" style="display: none;" accept=".png,.bfs">
<input type="button" id="loadcfs2" value="Load from file">
<input type="button" id="savecfs2" value="Save to file">
</p>
<h2>Serial Port Buffer</h2>
<p><span id="serialsize">0</span> bytes in serial port buffer.
<input type="file" id="serialfile" style="display: none;" accept=".bin">
<input type="button" id="loadserial" value="Load from file">
<input type="button" id="saveserial" value="Save to file">
</p>
<h2>Console</h2>
<pre id="terminal" tabindex="0">(Emulator not initialized)</pre>

<p>In case you want to pre-write or paste your text, or are on a mobile device:</p>
<label class="lbuf" for="buffer">Text buffer:</label><input type="text" id="buffer" name="buffer" value="" disabled><br class="clear">
<label class="lbuf" for="buffer">Hex buffer:</label><input type="text" id="hexbuffer" name="hexbuffer" value="" pattern="([0-9A-F]{2}( [0-9A-F]{2})*)?" disabled><br class="clear">
<p>Hit Enter on an empty field to insert a line break.</p>
</body>
</html>
